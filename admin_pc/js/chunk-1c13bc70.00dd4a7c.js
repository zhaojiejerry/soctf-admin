(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c13bc70"],{"0feb":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i})),s.d(e,"e",(function(){return o})),s.d(e,"f",(function(){return a})),s.d(e,"c",(function(){return c})),s.d(e,"d",(function(){return u}));var n=s("1d97");function r(t){return Object(n["a"])({url:"/sys/addPermission",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/sys/deletePermission",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/sys/linkRoleMenu",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/sys/modifyPermission",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/sys/getPermissionList",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/sys/getPermissionListTree",method:"get",params:t})}},"2d0d":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%"}},[s("el-container",{staticStyle:{height:"100%"}},[s("el-aside",{attrs:{width:"300px"}},[s("el-card",{staticClass:"box-card",staticStyle:{height:"99%"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("权限角色")])]),s("div",{staticStyle:{margin:"-0.2rem"}},[s("el-table",{attrs:{data:t.roleInfoList,"show-header":!1,"highlight-current-row":"","tooltip-effect":"dark"},on:{"row-click":t.rowClick}},[s("el-table-column",{attrs:{prop:"roleName",align:"left",label:"角色名称"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("span",{class:n.icon}),t._v(t._s(n.roleName)+" ")]}}])})],1)],1)])],1),s("el-main",{staticStyle:{padding:"0 0 0 0.2rem"}},[s("div",{staticStyle:{height:"100%"}},[s("el-card",{staticClass:"box-card",staticStyle:{height:"99%"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("菜单权限管理")]),s("div",{staticClass:"right-part"},[s("el-button",{attrs:{disabled:""==t.roleId,size:"small",type:"primary"},on:{click:t.linkRoleMenu}},[t._v("保存")])],1)]),s("div",{staticStyle:{height:"calc( 100vh - 190px )",overflow:"hidden"}},[s("el-scrollbar",{staticStyle:{height:"100%"},attrs:{"wrap-class":"scrollbar-wrapper"}},[s("el-tree",{ref:"tree",attrs:{props:t.props,data:t.permissionTree,"default-expand-all":"","node-key":"id","check-strictly":"","show-checkbox":""},on:{"check-change":t.handleCheckChange},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,r=e.data;return s("span",{staticClass:"custom-tree-node"},[s("div",[t._v(t._s(n.label)+" "),2==r.type?s("span",[t._v("( 按钮 )")]):t._e()])])}}])})],1)],1)])],1)])],1)],1)},r=[],i=(s("4160"),s("159b"),s("cc5e")),o=s("0feb"),a={components:{},data:function(){return{show:!1,addSign:!1,mainId:"",roleInfoList:[],permissionList:[],roleId:"",permissionTree:[],props:{label:"title"}}},computed:{buttons:function(){return this.$store.state.buttons}},mounted:function(){this.getRoleInfoList(),this.getPermissionTree()},methods:{linkRoleMenu:function(){var t=this,e=[],s=this.$refs.tree.getCheckedNodes();s.forEach((function(t){e.push(t.id)})),Object(o["e"])({menuIds:e,roleId:this.roleId}).then((function(e){e.success?t.$message({type:"success",message:"保存成功"}):(t.$message({type:"warning",message:e.message}),t.getPermissionList())}))},rowClick:function(t,e,s){this.roleId=t.roleId,this.getPermissionList()},handleCheckChange:function(t,e,s){console.log(t,e,s)},getRoleInfoList:function(){var t=this;Object(i["e"])().then((function(e){e.success&&(t.roleInfoList=e.data)}))},getPermissionList:function(){var t=this;Object(o["c"])({roleId:this.roleId}).then((function(e){if(e.success){t.permissionList=e.data;var s=[];t.$refs.tree.setCheckedKeys([]),t.permissionList.forEach((function(t){s.push(t.permId)})),console.log(s),t.$refs.tree.setCheckedKeys(s)}}))},getPermissionTree:function(){var t=this;Object(o["d"])({roleId:""}).then((function(e){e.success&&(t.permissionTree=e.data)}))}}},c=a,u=(s("aeb8"),s("2877")),l=Object(u["a"])(c,n,r,!1,null,"d927ebd8",null);e["default"]=l.exports},aeaa:function(t,e,s){},aeb8:function(t,e,s){"use strict";var n=s("aeaa"),r=s.n(n);r.a},cc5e:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"d",(function(){return i})),s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return a})),s.d(e,"e",(function(){return c})),s.d(e,"f",(function(){return u}));var n=s("1d97");function r(t){return Object(n["a"])({url:"/sys/addAuthorization",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/sys/getAuthorizationList",method:"get",data:t})}function o(t){return Object(n["a"])({url:"/sys/addRole",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/sys/deleteRole",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/sys/getRoleInfoList",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/sys/modifyRole",method:"post",data:t})}}}]);