(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dfa8b47"],{"29ee":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"background-color":"#edeef2"}},[r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("组织机构管理")]),r("div",{staticClass:"right-part"},[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addNew}},[e._v("新增")])],1)]),r("div",{staticClass:"user-child-list"},[r("el-table",{ref:"subAccountListTable",staticClass:"list-table",attrs:{"header-cell-style":{background:"#f7f7f7",color:"#333333",fontWeight:"bold"},"cell-style":{fontSize:"12px"},data:e.tableList,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"orgCode",align:"center",label:"机构编码"}}),r("el-table-column",{attrs:{prop:"orgName",align:"center",label:"机构名称"}}),r("el-table-column",{attrs:{label:"描述",align:"center",prop:"description","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"createAt",align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.parseTime(t.row.createAt))+" ")]}}])}),r("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},nativeOn:{click:function(r){return r.preventDefault(),e.handleEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(r){return e.handleDelete(t.row.orgId)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"pager-container mt30"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.tableTotal,background:"",size:"small",layout:"total,prev, pager, next, sizes, jumper, slot"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[r("el-button",{staticClass:"pagination-button",attrs:{size:"small",plain:""}},[e._v("确定")])],1)],1)],1)])],1),r("modify",{attrs:{"add-sign":e.addOrganiza,"rule-form":e.ruleForm},on:{getList:e.getOrganizationListPage},model:{value:e.showOrganiza,callback:function(t){e.showOrganiza=t},expression:"showOrganiza"}})],1)},n=[],o=r("d368"),i=r("ed08"),s=r("a4f0"),l={components:{modify:s["default"]},data:function(){return{showOrganiza:!1,addOrganiza:!1,tableList:[],tableTotal:0,pageSize:10,currentPage:1,ruleForm:{}}},computed:{buttons:function(){return this.$store.state.buttons}},mounted:function(){this.getOrganizationListPage()},methods:{addNew:function(){this.showOrganiza=!0,this.addOrganiza=!0,this.ruleForm={createAt:"",createBy:"",description:"",orgCode:"",orgId:"",orgName:"",remark:""}},parseTime:function(e){return Object(i["b"])(e)},handleEdit:function(e){this.showOrganiza=!0,this.addOrganiza=!1,this.ruleForm=Object(i["a"])(e)},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["d"])({organizationId:e}).then((function(e){e.success?(t.$message({type:"success",message:"删除成功"}),t.currentPage=1,t.getOrganizationListPage()):t.$message({type:"warning",message:e.message})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getOrganizationListPage:function(){var e=this;Object(o["g"])({currentPage:this.currentPage,extraParam:{},pageSize:this.pageSize}).then((function(t){t.success&&(e.tableList=t.data,e.tableTotal=t.count)}))},handleSizeChange:function(e){this.pageSize=e,this.getOrganizationListPage()},handleCurrentChange:function(e){this.currentPage=e,this.getOrganizationListPage()}}},u=l,c=(r("c948"),r("2877")),d=Object(c["a"])(u,a,n,!1,null,"1e8fc7d2",null);t["default"]=d.exports},"6c39":function(e,t,r){},a4f0:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.value,"show-close":!1,title:e.addSign?"新增":"修改"},on:{"update:visible":function(t){e.value=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"机构编码",prop:"orgCode"}},[r("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.orgCode,callback:function(t){e.$set(e.ruleForm,"orgCode",t)},expression:"ruleForm.orgCode"}})],1),r("el-form-item",{attrs:{label:"机构名称",prop:"orgName"}},[r("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.orgName,callback:function(t){e.$set(e.ruleForm,"orgName",t)},expression:"ruleForm.orgName"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{staticClass:"itemwidth",attrs:{type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{staticClass:"itemwidth",attrs:{type:"textarea"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),r("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)},n=[],o=(r("a4d3"),r("e01a"),r("5f87")),i=r("d368"),s={props:{value:{type:Boolean,default:!1},addSign:{type:Boolean,default:!1},ruleForm:{type:Object,default:function(){}}},data:function(){return{rules:{orgCode:[{required:!0,message:"请输入机构编码",trigger:"blur"}],orgName:[{required:!0,message:"请选择机构名称",trigger:"blur"}]}}},methods:{back:function(){this.$emit("input",!1)},onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.addSign?Object(i["b"])({createAt:new Date,createBy:Object(o["a"])("usrId"),description:e.ruleForm.description,orgCode:e.ruleForm.orgCode,orgId:"",orgName:e.ruleForm.orgName,remark:e.ruleForm.remark}).then((function(t){t.success?(e.$message({type:"success",message:"新增成功"}),e.back(),e.$emit("getList")):e.$message({type:"warning",message:t.message})})):Object(i["i"])({createAt:e.ruleForm.createAt,createBy:e.ruleForm.createBy,description:e.ruleForm.description,orgCode:e.ruleForm.orgCode,orgId:e.ruleForm.orgId,orgName:e.ruleForm.orgName,remark:e.ruleForm.remark}).then((function(t){t.success?(e.$message({type:"success",message:"修改成功"}),e.back(),e.$emit("getList")):e.$message({type:"warning",message:t.message})})))}))}}},l=s,u=r("2877"),c=Object(u["a"])(l,a,n,!1,null,null,null);t["default"]=c.exports},c948:function(e,t,r){"use strict";var a=r("6c39"),n=r.n(a);n.a},d368:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"i",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"h",(function(){return g}));var a=r("1d97");function n(e){return Object(a["a"])({url:"/sys/addOrganization",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/sys/deleteOrganization",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/sys/getOrganizationList",method:"get",data:e})}function s(e){return Object(a["a"])({url:"/sys/getOrganizationListPage",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/sys/modifyOrganization",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/sys/addBranch",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/sys/deleteBranch",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/sys/getBranchListPage",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/sys/modifyBranch",method:"post",data:e})}}}]);