(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55b089fa"],{"219e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.value,"show-close":!1,title:e.addSign?"新增":"修改"},on:{"update:visible":function(t){e.value=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"工具名称",prop:"weapName"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.weapName,callback:function(t){e.$set(e.ruleForm,"weapName",t)},expression:"ruleForm.weapName"}})],1),a("el-form-item",{attrs:{label:"描述URL",prop:"descUrl"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.descUrl,callback:function(t){e.$set(e.ruleForm,"descUrl",t)},expression:"ruleForm.descUrl"}})],1),a("el-form-item",{attrs:{label:"下载URL",prop:"downloadUrl"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.downloadUrl,callback:function(t){e.$set(e.ruleForm,"downloadUrl",t)},expression:"ruleForm.downloadUrl"}})],1),a("el-form-item",{attrs:{label:"图片URL",prop:"iconUrl"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.iconUrl,callback:function(t){e.$set(e.ruleForm,"iconUrl",t)},expression:"ruleForm.iconUrl"}})],1),a("el-form-item",{attrs:{label:"官网URL",prop:"orgUrl"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.orgUrl,callback:function(t){e.$set(e.ruleForm,"orgUrl",t)},expression:"ruleForm.orgUrl"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{staticClass:"itemwidth",attrs:{type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),a("el-form-item",{attrs:{label:"标签",prop:"label"}},[a("el-select",{staticClass:"itemwidth",attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:e.ruleForm.weapLabel,callback:function(t){e.$set(e.ruleForm,"weapLabel",t)},expression:"ruleForm.weapLabel"}},e._l(e.label,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)},l=[],o=(a("a4d3"),a("e01a"),a("a15b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5f87")),n=a("c1ab"),i={props:{value:{type:Boolean,default:!1},addSign:{type:Boolean,default:!1},mainId:{type:String,default:""}},data:function(){return{rules:{weapName:[{required:!0,message:"请输入工具名称",trigger:"blur"}]},label:[],ruleForm:{createById:"",createTime:"",del:!1,descUrl:"",description:"",downloadUrl:"",iconUrl:"",id:0,orgUrl:"",weapLabel:"",weapName:""},mainPic:""}},watch:{value:function(e){e&&(this.addSign?this.ruleForm={createById:"",createTime:"",del:!1,descUrl:"",description:"",downloadUrl:"",iconUrl:"",id:0,orgUrl:"",weapLabel:"",weapName:""}:this.getOneWeaponToolInfo())}},methods:{handleAvatarSuccess:function(e,t){e.success?this.mainPic=URL.createObjectURL(t.raw):(this.mainPic="",this.$message.error(e.message))},beforeAvatarUpload:function(e){console.log(e.type);var t="image/jpeg"==e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG /png /git 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},getOneWeaponToolInfo:function(){var e=this;Object(n["c"])({id:this.mainId}).then((function(t){t.success&&(e.ruleForm=t.data,e.ruleForm.weapLabel=e.getLabel(t.data.weapLabel),e.label=e.ruleForm.weapLabel)}))},back:function(){this.$emit("input",!1)},onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.addSign?Object(n["a"])({createById:Object(o["a"])("usrId"),del:!1,descUrl:e.ruleForm.descUrl,description:e.ruleForm.description,downloadUrl:e.ruleForm.downloadUrl,iconUrl:e.ruleForm.iconUrl,id:0,orgUrl:e.ruleForm.orgUrl,weapLabel:e.ruleForm.weapLabel.join("|"),weapName:e.ruleForm.weapName}).then((function(t){t.success?(e.$message({type:"success",message:"新增成功"}),e.back(),e.$emit("getList")):e.$message({type:"warning",message:t.message})})):Object(n["e"])({createById:e.ruleForm.createById,del:e.ruleForm.del,descUrl:e.ruleForm.descUrl,description:e.ruleForm.description,downloadUrl:e.ruleForm.downloadUrl,iconUrl:e.ruleForm.iconUrl,id:e.ruleForm.id,orgUrl:e.ruleForm.orgUrl,weapLabel:e.ruleForm.weapLabel.join("|"),weapName:e.ruleForm.weapName}).then((function(t){t.success?(e.$message({type:"success",message:"修改成功"}),e.back(),e.$emit("getList")):e.$message({type:"warning",message:t.message})})))}))}}},s=i,c=(a("f3c4"),a("2877")),u=Object(c["a"])(s,r,l,!1,null,null,null);t["default"]=u.exports},"818c":function(e,t,a){},c1ab:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return s}));var r=a("1d97");function l(e){return Object(r["a"])({url:"/Weapon/addWeaponTool",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/Weapon/deleteWeaponTool",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/Weapon/getOneWeaponToolInfo",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/Weapon/getWeaponListForPage",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/Weapon/updateWeaponTool",method:"post",data:e})}},c32c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#edeef2"}},[a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("武器库")]),a("div",{staticClass:"right-part"},[-1!=e.buttons.indexOf("56")?a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addNew}},[e._v("新增")]):e._e()],1)]),a("div",{staticClass:"user-child-list"},[a("el-table",{ref:"subAccountListTable",staticClass:"list-table",attrs:{"header-cell-style":{background:"#f7f7f7",color:"#333333",fontWeight:"bold"},"cell-style":{fontSize:"12px"},data:e.tableList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"weapName",align:"center",label:"工具名称"}}),a("el-table-column",{attrs:{prop:"description",align:"center",label:"描述"}}),a("el-table-column",{attrs:{label:"描述URL",align:"center",prop:"descUrl","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"下载URL",align:"center",prop:"downloadUrl","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"图片URL",align:"center",prop:"iconUrl","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"官网URL",align:"center",prop:"orgUrl","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=e.buttons.indexOf("58")?a("el-button",{attrs:{size:"small",type:"text"},nativeOn:{click:function(a){return a.preventDefault(),e.handleEdit(t.row.id)}}},[e._v("编辑")]):e._e(),-1!=e.buttons.indexOf("57")?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),a("div",{staticClass:"pager-container mt30"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.tableTotal,background:"",size:"small",layout:"total,prev, pager, next, sizes, jumper, slot"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-button",{staticClass:"pagination-button",attrs:{size:"small",plain:""}},[e._v("确定")])],1)],1)],1)])],1),a("modify",{attrs:{"add-sign":e.addSign,"main-id":e.mainId},on:{getList:e.getWeaponListForPage},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},l=[],o=a("c1ab"),n=a("ed08"),i=a("219e"),s={components:{modify:i["default"]},data:function(){return{show:!1,addSign:!1,mainId:"",tableList:[],tableTotal:0,pageSize:10,currentPage:1}},computed:{buttons:function(){return this.$store.state.buttons}},mounted:function(){this.getWeaponListForPage()},methods:{addNew:function(){this.show=!0,this.addSign=!0,this.mainId=""},parseTime:function(e){return Object(n["b"])(e)},handleEdit:function(e){this.show=!0,this.mainId=e,this.addSign=!1},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])({id:e}).then((function(e){e.success?(t.$message({type:"success",message:"删除成功"}),t.currentPage=1,t.getWeaponListForPage()):t.$message({type:"warning",message:e.message})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getWeaponListForPage:function(){var e=this;Object(o["d"])({currentPage:this.currentPage,extraParam:{},pageSize:this.pageSize}).then((function(t){t.success&&(e.tableList=t.data,e.tableTotal=t.count)}))},handleSizeChange:function(e){this.pageSize=e,this.getWeaponListForPage()},handleCurrentChange:function(e){this.currentPage=e,this.getWeaponListForPage()}}},c=s,u=(a("fc31"),a("2877")),d=Object(u["a"])(c,r,l,!1,null,"8db1be80",null);t["default"]=d.exports},f3c4:function(e,t,a){"use strict";var r=a("818c"),l=a.n(r);l.a},fc31:function(e,t,a){"use strict";var r=a("fe00"),l=a.n(r);l.a},fe00:function(e,t,a){}}]);