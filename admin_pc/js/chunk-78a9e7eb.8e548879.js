(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a9e7eb","chunk-45f093fc"],{"0b1f":function(e,t,a){"use strict";var r=a("89d8"),o=a.n(r);o.a},"89d8":function(e,t,a){},a434:function(e,t,a){"use strict";var r=a("23e7"),o=a("23cb"),s=a("a691"),n=a("50c4"),i=a("7b0b"),l=a("65f0"),c=a("8418"),m=a("1dde"),u=a("ae40"),d=m("splice"),g=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!g},{splice:function(e,t){var a,r,m,u,d,g,v=i(this),k=n(v.length),y=o(e,k),F=arguments.length;if(0===F?a=r=0:1===F?(a=0,r=k-y):(a=F-2,r=p(f(s(t),0),k-y)),k+a-r>h)throw TypeError(b);for(m=l(v,r),u=0;u<r;u++)d=y+u,d in v&&c(m,u,v[d]);if(m.length=r,a<r){for(u=y;u<k-r;u++)d=u+r,g=u+a,d in v?v[g]=v[d]:delete v[g];for(u=k;u>k-r+a;u--)delete v[u-1]}else if(a>r)for(u=k-r;u>y;u--)d=u+r-1,g=u+a-1,d in v?v[g]=v[d]:delete v[g];for(u=0;u<a;u++)v[u+y]=arguments[u+2];return v.length=k-r+a,m}})},aef8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.value,"show-close":!1,title:e.addSign?"新增":"修改"},on:{"update:visible":function(t){e.value=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"赛事名称",prop:"gameName"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.gameName,callback:function(t){e.$set(e.ruleForm,"gameName",t)},expression:"ruleForm.gameName"}})],1),a("el-form-item",{attrs:{label:"比赛类型",prop:"gameType"}},[a("el-select",{staticClass:"itemwidth",attrs:{placeholder:"请选择比赛类型"},model:{value:e.ruleForm.gameType,callback:function(t){e.$set(e.ruleForm,"gameType",t)},expression:"ruleForm.gameType"}},[a("el-option",{attrs:{label:"个人",value:"1"}}),a("el-option",{attrs:{label:"团队",value:"2"}})],1)],1),a("el-form-item",{attrs:{label:"参赛者"}},[a("div",{staticClass:"itemwidth el-input",on:{click:e.getpsn}},[a("div",{staticClass:"box"},e._l(e.joiners,(function(t,r){return a("el-tag",{key:r,attrs:{type:"info",closable:""},on:{close:function(a){return e.handleClose(t,r)}}},[e._v(" "+e._s(t.username)+" ")])})),1)])]),a("el-form-item",{attrs:{label:"比赛时间",prop:"description"}},[a("el-date-picker",{staticClass:"itemwidth",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1),a("el-form-item",{attrs:{label:"比赛官网",prop:"gameOfficeAddress"}},[a("el-input",{staticClass:"itemwidth",model:{value:e.ruleForm.gameOfficeAddress,callback:function(t){e.$set(e.ruleForm,"gameOfficeAddress",t)},expression:"ruleForm.gameOfficeAddress"}})],1),a("el-form-item",{attrs:{label:"赛事描述",prop:"description"}},[a("el-input",{staticClass:"itemwidth",attrs:{type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),a("el-form-item",{attrs:{label:"比赛详细描述",prop:"gameText"}},[a("el-input",{staticClass:"itemwidth",attrs:{type:"textarea"},model:{value:e.ruleForm.gameText,callback:function(t){e.$set(e.ruleForm,"gameText",t)},expression:"ruleForm.gameText"}})],1),a("el-form-item",{attrs:{label:"比赛LOGO图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleiconSuccess,"before-upload":e.beforeAvatarUpload,action:"/baseApi/oss"}},[e.iconUrl?a("img",{staticClass:"avatar",attrs:{src:e.iconUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"赛事主图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,action:"/baseApi/oss"}},[e.mainPic?a("img",{staticClass:"avatar",attrs:{src:e.mainPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"赛事说明"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"on-success":e.handleRemark,"file-list":e.remark,action:"/baseApi/oss"},on:{"on-remove":e.handleRemove1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传md/pdf文件")])],1)],1),a("el-form-item",{attrs:{label:"赛事积分说明"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"on-success":e.handleScoreRemark,"file-list":e.scoreRemark,action:"/baseApi/oss"},on:{"on-remove":e.handleRemove2}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传md/pdf文件")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),a("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%",title:"参赛者"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.extraParam.username,callback:function(t){e.$set(e.extraParam,"username",t)},expression:"extraParam.username"}})],1),a("el-form-item",{attrs:{label:"公司",prop:"company"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.extraParam.company,callback:function(t){e.$set(e.extraParam,"company",t)},expression:"extraParam.company"}})],1),a("el-form-item",{attrs:{label:"学校",prop:"school"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.extraParam.school,callback:function(t){e.$set(e.extraParam,"school",t)},expression:"extraParam.school"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleCurrentChange(1)}}},[e._v("查询")])],1),a("el-table",{ref:"multipleTable",staticClass:"list-table",attrs:{"header-cell-style":{background:"#f7f7f7",color:"#333333",fontWeight:"bold"},"cell-style":{fontSize:"12px"},data:e.tableData,"tooltip-effect":"dark"},on:{select:e.select,"select-all":e.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"username",align:"center",label:"用户名"}}),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"电话号码"}}),a("el-table-column",{attrs:{prop:"email",align:"center",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"school",align:"center",label:"学校"}}),a("el-table-column",{attrs:{prop:"company",align:"center",label:"公司"}})],1),a("div",{staticClass:"pager-container mt30"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.subTotal,background:"",size:"small",layout:"total,prev, pager, next, sizes, jumper, slot"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-button",{staticClass:"pagination-button",attrs:{size:"small",plain:""}},[e._v("确定")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("确 定")])],1)],1)],1)},o=[],s=(a("a4d3"),a("e01a"),a("4de4"),a("c740"),a("4160"),a("caad"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("c5c2")),n=a("c24f"),i={components:{},props:{value:{type:Boolean,default:!1},addSign:{type:Boolean,default:!1},mainId:{type:String,default:""}},data:function(){return{dialogTableVisible:!1,joiners:[],ruleForm:{date:[],description:"",endTime:"",gameId:"",gameName:"",gameOfficeAddress:"",gameStatus:"",gameText:"",gameType:"1",gameWay:"",iconUrl:"",joinerIds:[],mainPic:"",organizer:"",remark:"",scoreRemark:"",startTime:""},rules:{gameName:[{required:!0,message:"请输入赛事名称",trigger:"blur"}],gameType:[{required:!0,message:"请选择比赛类型",trigger:"change"}]},remark:[],scoreRemark:[],iconUrl:"",mainPic:"",tableData:[],subTotal:0,pageSize:10,currentPage:1,extraParam:{}}},watch:{value:function(e){e&&(this.addSign?this.ruleForm={date:[],description:"",endTime:"",gameId:"",gameName:"",gameOfficeAddress:"",gameStatus:"",gameText:"",gameType:"1",gameWay:"",iconUrl:"",joinerIds:[],mainPic:"",organizer:"",remark:"",scoreRemark:"",startTime:""}:this.getGameInfoDetail())}},mounted:function(){var e=this;this.$nextTick((function(){e.getUserInfoList()}))},methods:{getpsn:function(){this.dialogTableVisible=!0},handleClose:function(e,t){this.joiners.splice(t,1),this.$refs.multipleTable.toggleRowSelection(e)},select:function(e,t){if(console.log(e,t),e.includes(t))this.joiners.push(t);else{var a=this.joiners.findIndex((function(e){return e.usrId===t.usrId}));this.joiners.splice(a,1)}},selectAll:function(e){var t=this;e.length>0?this.tableData.forEach((function(e){var a=t.joiners.findIndex((function(t){return t.usrId===e.usrId}));-1===a&&t.joiners.push(e)})):this.joiners.forEach((function(e,a){t.tableData.forEach((function(a){e.usrId==a.usrId&&(t.joiners=t.joiners.filter((function(e){return e.usrId!=a.usrId})))}))}))},getTeamInfoListForPage:function(){var e=this;Object(n["m"])({currentPage:this.currentPage,extraParam:{},pageSize:this.pageSize}).then((function(t){t.success&&(e.tableData=t.data,e.joiners.forEach((function(t){e.tableData.forEach((function(a){t.teamId===a.teamId&&e.$refs.multipleTable.toggleRowSelection(a,!0)}))})),e.subTotal=t.count)}))},getUserInfoList:function(){var e=this,t={};for(var a in this.extraParam)""!=this.extraParam[a]&&(t[a]=this.extraParam[a]);Object(n["n"])({currentPage:this.currentPage,extraParam:t,pageSize:this.pageSize}).then((function(t){t.success&&(e.tableData=t.data,e.joiners.forEach((function(t){e.tableData.forEach((function(a){t.usrId===a.usrId&&e.$refs.multipleTable.toggleRowSelection(a,!0)}))})),e.subTotal=t.count)}))},handleSizeChange:function(e){this.pageSize=e,this.getUserInfoList()},handleCurrentChange:function(e){this.currentPage=e,this.getUserInfoList()},handleRemark:function(e,t,a){console.log(e,t,a),e.success?(this.remark=[{name:t.name,url:e.message}],this.ruleForm.remark=e.message):(this.remark=[],this.ruleForm.remark="",this.$message.error(e.message))},handleScoreRemark:function(e,t,a){console.log(e,t,a),e.success?(this.scoreRemark=[{name:t.name,url:e.message}],this.ruleForm.scoreRemark=e.message):(this.scoreRemark=[],this.ruleForm.scoreRemark="",this.$message.error(e.message))},handleRemove1:function(e,t){console.log(e,t),this.remark=[],this.ruleForm.remark=""},handleRemove2:function(e,t){console.log(e,t),this.scoreRemark=[],this.ruleForm.scoreRemark=""},handleAvatarSuccess:function(e,t){e.success?this.mainPic=URL.createObjectURL(t.raw):(this.mainPic="",this.$message.error(e.message))},handleiconSuccess:function(e,t){e.success?this.iconUrl=URL.createObjectURL(t.raw):(this.iconUrl="",this.$message.error(e.message))},beforeAvatarUpload:function(e){console.log(e.type);var t="image/jpeg"==e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG /png /git 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},getGameInfoDetail:function(){var e=this;Object(s["e"])({gameId:this.mainId}).then((function(t){if(t.success){e.ruleForm=t.data,e.ruleForm.date=[t.data.startTime,t.data.endTime];var a=t.data.remark.split("/");console.log(a),e.remark=""==t.data.remark?[]:[{name:a[a.length-1],url:t.data.remark}];var r=t.data.scoreRemark.split("/");e.scoreRemark=""==t.data.scoreRemark?[]:[{name:r[r.length-1],url:t.data.scoreRemark}]}}))},back:function(){this.$emit("input",!1)},onSubmit:function(){var e=this,t=[];this.joiners.forEach((function(e){t.push(e.usrId)})),this.$refs.ruleForm.validate((function(a){console.log(a),a&&(e.addSign?Object(s["a"])({description:e.ruleForm.description,endTime:e.ruleForm.date[1],gameId:"",gameName:e.ruleForm.gameName,gameOfficeAddress:e.ruleForm.gameOfficeAddress,gameStatus:"1",gameText:e.ruleForm.gameText,gameType:e.ruleForm.gameType,gameWay:e.ruleForm.gameWay,iconUrl:e.iconUrl,joinerIds:t,mainPic:e.mainPic,organizer:e.ruleForm.organizer,remark:e.ruleForm.remark,scoreRemark:e.ruleForm.scoreRemark,startTime:e.ruleForm.date[0]}).then((function(t){t.success?(e.$message({type:"success",message:"新增成功"}),e.back(),e.$emit("getList")):e.$message({type:"warning",message:t.message})})):e.$confirm("每次修改，分配到每个用户的比赛秘钥都会变化, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["m"])({description:e.ruleForm.description,endTime:e.ruleForm.date[1],gameId:e.ruleForm.gameId,gameName:e.ruleForm.gameName,gameOfficeAddress:e.ruleForm.gameOfficeAddress,gameStatus:e.ruleForm.gameStatus,gameText:e.ruleForm.gameText,gameType:e.ruleForm.gameType,gameWay:e.ruleForm.gameWay,iconUrl:e.iconUrl,joinerIds:t,mainPic:e.mainPic,organizer:e.ruleForm.organizer,remark:e.ruleForm.remark,scoreRemark:e.ruleForm.scoreRemark,startTime:e.ruleForm.date[0]}).then((function(t){t.success?(e.$message({type:"success",message:"修改成功"}),e.back(),e.$emit("getList")):e.$message({type:"warning",message:t.message})}))})).catch((function(){})))}))}}},l=i,c=(a("0b1f"),a("2877")),m=Object(c["a"])(l,r,o,!1,null,null,null);t["default"]=m.exports},c5c2:function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"m",(function(){return c})),a.d(t,"p",(function(){return m})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"i",(function(){return g})),a.d(t,"h",(function(){return f})),a.d(t,"n",(function(){return p})),a.d(t,"j",(function(){return h})),a.d(t,"l",(function(){return b})),a.d(t,"k",(function(){return v})),a.d(t,"o",(function(){return k}));var r=a("1d97");function o(e){return Object(r["a"])({url:"/game/getGameInfoListForPage",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/game/deleteGame",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/game/addGameInfo",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/game/endGame",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/game/getGameInfoDetail",method:"post",params:e})}function c(e){return Object(r["a"])({url:"/game/modifyGameInfo",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/game/startGame",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/createPaperInfoForGame",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/game/getGameOssFile",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/game/getRankingList",method:"get",params:e,hideloading:!0})}function f(e){return Object(r["a"])({url:"/getNoticeListForUser",method:"post",data:e,hideloading:!0})}function p(e){return Object(r["a"])({url:"/game/rankingInDB",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/getScoreViewList",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/modifyContestFinalScore",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/hideContestUserScore",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/sys/sendGameToken",method:"get",params:e})}},c740:function(e,t,a){"use strict";var r=a("23e7"),o=a("b727").findIndex,s=a("44d2"),n=a("ae40"),i="findIndex",l=!0,c=n(i);i in[]&&Array(1)[i]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},e01a:function(e,t,a){"use strict";var r=a("23e7"),o=a("83ab"),s=a("da84"),n=a("5135"),i=a("861d"),l=a("9bf2").f,c=a("e893"),m=s.Symbol;if(o&&"function"==typeof m&&(!("description"in m.prototype)||void 0!==m().description)){var u={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new m(e):void 0===e?m():m(e);return""===e&&(u[t]=!0),t};c(d,m);var g=d.prototype=m.prototype;g.constructor=d;var f=g.toString,p="Symbol(test)"==String(m("test")),h=/^Symbol\((.*)\)[^)]+$/;l(g,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=f.call(e);if(n(u,e))return"";var a=p?t.slice(7,-1):t.replace(h,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:d})}}}]);